# ECDH åŠ å¯†èŠå¤©å®¤å°ˆæ¡ˆçµæ§‹

## æª”æ¡ˆçµ„ç¹”

å°ˆæ¡ˆå·²é‡æ§‹ç‚ºæ¨¡çµ„åŒ–æ¶æ§‹ï¼Œæ¯å€‹ class å’Œ widget éƒ½åˆ†é›¢åˆ°ç¨ç«‹çš„æª”æ¡ˆä¸­ï¼š

### ğŸ“ lib/
ä¸»è¦ç¨‹å¼ç¢¼ç›®éŒ„

#### ğŸ“ app/
æ‡‰ç”¨ç¨‹å¼æ ¸å¿ƒé…ç½®
- `my_app.dart` - ä¸»æ‡‰ç”¨ç¨‹å¼é¡åˆ¥ï¼ŒåŒ…å« MaterialApp é…ç½®

#### ğŸ“ models/  
è³‡æ–™æ¨¡å‹
- `chat_message.dart` - èŠå¤©è¨Šæ¯è³‡æ–™æ¨¡å‹ï¼ŒåŒ…å«åŠ å¯†ç›¸é—œæ¬„ä½

#### ğŸ“ pages/
é é¢çµ„ä»¶
- `test_page.dart` - ä¸»èŠå¤©æ¸¬è©¦é é¢ï¼ŒåŒ…å«ä¸‰å€‹èŠå¤©é¢æ¿å’Œå¯†é‘°ç®¡ç†é‚è¼¯

#### ğŸ“ widgets/
UI çµ„ä»¶
- `message_bubble.dart` - ç¨ç«‹çš„è¨Šæ¯æ°£æ³¡çµ„ä»¶ï¼Œå…·å‚™è‡ªå‹•è§£å¯†åŠŸèƒ½

#### ğŸ”§ æœå‹™é¡åˆ¥
- `message_encryption_service.dart` - åŠ å¯†/è§£å¯†æœå‹™
- `encrypt_message_content.dart` - åŠ å¯†è¨Šæ¯å…§å®¹å®šç¾©
- `simple_text.dart` - è‡ªè¨‚æ–‡å­—çµ„ä»¶

#### ğŸ“± ä¸»å…¥å£
- `main.dart` - æ‡‰ç”¨ç¨‹å¼å…¥å£é»ï¼Œåƒ…åŒ…å« main() å‡½æ•¸

## æ¶æ§‹ç‰¹è‰²

### ğŸ” åŠ å¯†åŠŸèƒ½
- **ECDH X25519** å¯†é‘°äº¤æ›
- **ChaCha20-Poly1305** åŠ å¯†æ¼”ç®—æ³•
- **ç«¯å°ç«¯åŠ å¯†** èŠå¤©è¨Šæ¯

### ğŸ¯ UI ç‰¹è‰²
- **ä¸‰é¢æ¿è¨­è¨ˆ**ï¼šç”¨æˆ¶A | Server | ç”¨æˆ¶B
- **ç¨ç«‹è¨Šæ¯çµ„ä»¶**ï¼šæ¯å‰‡è¨Šæ¯éƒ½æ˜¯ç¨ç«‹çš„ StatefulWidget
- **è‡ªå‹•è§£å¯†**ï¼šæ¥æ”¶åˆ°çš„åŠ å¯†è¨Šæ¯æœƒè‡ªå‹•è§£å¯†é¡¯ç¤º
- **å³æ™‚åŠ å¯†ç‹€æ…‹**ï¼šé¡¯ç¤ºè§£å¯†é€²åº¦å’ŒåŠ å¯†ç‹€æ…‹

### ğŸ“¦ æ¨¡çµ„åŒ–è¨­è¨ˆ
- **åˆ†é›¢é—œæ³¨é»**ï¼šæ¯å€‹é¡åˆ¥éƒ½æœ‰ç¨ç«‹çš„æª”æ¡ˆ
- **æ¸…æ™°ç›®éŒ„çµæ§‹**ï¼šæŒ‰åŠŸèƒ½åˆ†é¡çµ„ç¹”æª”æ¡ˆ
- **æ˜“æ–¼ç¶­è­·**ï¼šæ¨¡çµ„åŒ–æ¶æ§‹ä¾¿æ–¼å¾ŒçºŒé–‹ç™¼å’Œç¶­è­·

## ä½¿ç”¨æ–¹å¼

1. **åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼**ï¼š
   ```bash
   flutter run
   ```

2. **åŸ·è¡Œæ¸¬è©¦**ï¼š
   ```bash
   flutter test
   ```

3. **ç¨‹å¼ç¢¼åˆ†æ**ï¼š
   ```bash
   flutter analyze
   ```

## æª”æ¡ˆä¾è³´é—œä¿‚

```
main.dart
â”œâ”€â”€ app/my_app.dart
    â””â”€â”€ pages/test_page.dart
        â”œâ”€â”€ models/chat_message.dart
        â”œâ”€â”€ widgets/message_bubble.dart
        â”œâ”€â”€ message_encryption_service.dart
        â””â”€â”€ simple_text.dart
```

é‡æ§‹å®Œæˆå¾Œï¼Œç¨‹å¼ç¢¼æ›´åŠ æ¨¡çµ„åŒ–ã€æ˜“æ–¼ç¶­è­·ï¼Œæ¯å€‹çµ„ä»¶éƒ½æœ‰æ˜ç¢ºçš„è·è²¬åˆ†å·¥ã€‚
